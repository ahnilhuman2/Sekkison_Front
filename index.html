<!DOCTYPE html>
<html lang="en">
<head>
	<title>login</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
	<script src="./js/path.js"></script>
	<script>
		if (localStorage.getItem("sks_username") != null && localStorage.getItem("sks_password") != null) {
			let data = {
			"username":localStorage.getItem("sks_username"),
			"password":localStorage.getItem("sks_password")
		};
		$.ajax({
			url:`${path}/users/login`,
			type:"POST",
			data:data,
			cache:false,
			success : function(data){
						if (data.success) {
							console.log("자동로그인 성공");
							localStorage.setItem('sks_id', data.data.id);
							localStorage.setItem('sks_username', data.data.username);
							localStorage.setItem('sks_password', data.data.password);
							localStorage.setItem('sks_name', data.data.name);
							location.href="./pages/home.html";
						} else {
							console.log("자동로그인 실패 : " + data.msg);
						}
				}
			});
		}
	</script>
<!--구글 -->
	<meta name = "google-signin-scope" content = "profile">
	<meta name ="google-signin-client_id" content="646957294495-4nitspjp5vn5u7aapj5ph6qhvt9fdm0m.apps.googleusercontent.com">
	<script src="https://apis.google.com/js/platform.js" async defer></script>
	<script src="https://accounts.google.com/gsi/client" async defer></script>
	<script src="https://unpkg.com/jwt-decode/build/jwt-decode.js"></script>
<!--카카오 -->
	<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<!--네이버 -->
	<script src="https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.2.js" charset="utf-8"></script>
<!--===============================================================================================-->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Shantell+Sans:ital,wght@0,300;1,300&display=swap" rel="stylesheet">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/login.css">
<!--===============================================================================================-->
</head>
<body>
	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100">
				<form id="frm" class="login100-form validate-form">
					<span class="login100-form-title p-b-10">
						sekkison
					</span>
					<span class="login100-form-title p-b-20">
						<img src="./images/logos/logo.png" alt="logo"/>
					</span>

					<div class="wrap-input100 validate-input" data-validate="아이디는 영문+숫자 4~10자만 가능합니다">
						<input class="input100" id="ID" type="text" name="id">
						<span class="focus-input100" data-placeholder="ID"></span>
					</div>

					<div class="wrap-input100 validate-input" data-validate="비밀번호를 입력해주세요">
						<span class="btn-show-pass">
							<i class="zmdi zmdi-eye"></i>
						</span>
						<input class="input100" id="PW" type="password" name="pass">
						<span class="focus-input100" data-placeholder="PW"></span>
					</div>
					<div id="error" class="fs-1 text-danger">
						
					</div>
					<div class="container-login100-form-btn">
						<div class="wrap-login100-form-btn">
							<div class="login100-form-bgbtn"></div>
							<button id="submitBtn" type="button" class="login100-form-btn">
								Login
							</button>
						</div>
					</div>
					<div class="text-center p-t-10 p-b-10">
						<span class="txt1"> 계정이 없으신가요?&nbsp; </span>
						<a class="txt2" href="./pages/register.html"> 회원가입 </a>
					</div>
					<div style="display:flex; flex-wrap:wrap; justify-content:space-around;">
						<img id="googleBtn" style="height:50px; width:50px; border:1px solid rgb(192, 192, 192);
							border-radius: 5px; cursor:pointer;" src="./images/icons/google.png">
						<img id="kakaoBtn" style="height:50px; width:50px; cursor:pointer;"
							src="./images/icons/kakaotalk.png">
						<a id="naverIdLogin_loginButton" style="cursor:pointer">
							<img style="height:50px; width:50px;" src="./images/icons/naver.png">
						</a>
					</div>
				</form>
			</div>
		</div>
	</div>
	

	<div id="dropDownSelect1"></div>
<!--===============================================================================================-->
	<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/daterangepicker/moment.min.js"></script>
	<script src="vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
	<script src="vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
</body>
<script src="./js/login.js"></script>
<script>
function init() {
	console.log("init 함수 실행");
	gapi.load('auth2', function() {
		 gapi.auth2.init();
		 options = new gapi.auth2.SigninOptionsBuilder();
		 options.setPrompt('select_account');
		 // 추가는 Oauth 승인 권한 추가 후 띄어쓰기 기준으로 추가
		 //options.setScope('profile');
		 // 인스턴스의 함수 호출 - element에 로그인 기능 추가
		 // GgCustomLogin은 li태그안에 있는 ID, 위에 설정한 options와 아래 성공,실패시 실행하는 함수들
		 gapi.auth2.getAuthInstance().attachClickHandler('GgCustomLogin', options, onSignIn, onSignInFailure);
	})
}

function onSignIn(googleUser) {
	let profile = googleUser.getBasicProfile();
	console.log(profile);
	/*
	var access_token = googleUser.getAuthResponse().access_token
	$.ajax({
		 // people api를 이용하여 프로필 및 생년월일에 대한 선택동의후 가져온다.
		 url: 'https://people.googleapis.com/v1/people/me'
		 // key에 자신의 API 키를 넣습니다.
		 , data: {key:'AIzaSyCDHh1kHgvFdX5vIqpmsxOOd2gaYi7taZg', 'access_token': access_token}
		 , method:'GET'
	})
	.done(function(e){
		 //프로필을 가져온다.
		 var profile = googleUser.getBasicProfile();
		 console.log(profile);
		 const token = profile.sub;
		 //apiLogin(`google_${token}`, `google_pw_${token}`, 0);
	})
	.fail(function(e){
		 console.log(e);
	})
	*/
}
function onSignInFailure(t){		
	console.log(t);
}
</script>
</html>